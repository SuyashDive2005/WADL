<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - EventHub</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"
    />
    <style>
      :root {
        --primary: #374151;
        --primary-dark: #1f2937;
        --dark: #374151;
        --light: #ffffff;
        --gray: #9ca3af;
        --success: #374151;
        --danger: #374151;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --border: #e5e7eb;
        --text: #1f2937;
        --text-secondary: #6b7280;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: var(--bg-primary);
        color: var(--text);
        min-height: 100vh;
        overflow-x: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      input,
      select,
      textarea {
        border: 1px solid rgba(0, 0, 0, 0.25);
        border-radius: 10px;
        transition:
          border-color 0.2s ease,
          box-shadow 0.2s ease;
      }

      input:focus,
      select:focus,
      textarea:focus {
        border-color: rgba(0, 0, 0, 0.45);
        outline: none;
        box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.08);
      }

      .animated-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        background: var(--bg-primary);
        overflow: hidden;
      }

      @keyframes float {
        0%,
        100% {
          transform: translate(0, 0) rotate(0deg);
        }
        33% {
          transform: translate(100px, -100px) rotate(120deg);
        }
        66% {
          transform: translate(-50px, 50px) rotate(240deg);
        }
      }

      .login-container {
        position: relative;
        z-index: 1;
        width: 100%;
        max-width: 500px;
        padding: 2rem;
      }

      .back-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-secondary);
        text-decoration: none;
        padding: 0.5rem 1rem;
        border-radius: 10px;
        margin-bottom: 2rem;
        transition: all 0.3s ease;
      }

      .back-btn:hover {
        background: var(--bg-tertiary);
      }

      .login-card {
        background: var(--bg-secondary);
        border: 1px solid var(--border);
        border-radius: 32px;
        padding: 3rem 2.5rem;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
      }

      .login-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .login-header h1 {
        font-family: "Syne", sans-serif;
        font-size: 2.25rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--text);
      }

      .role-badge {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: rgba(55, 65, 81, 0.1);
        color: var(--primary);
        border-radius: 20px;
        font-weight: 500;
        font-size: 0.875rem;
        text-transform: capitalize;
        border: 1px solid var(--border);
      }

      /* Tab Styles */
      .auth-tabs {
        display: flex;
        margin-bottom: 2rem;
        background: var(--bg-tertiary);
        border-radius: 12px;
        padding: 0.25rem;
        gap: 0.25rem;
      }

      .tab-btn {
        flex: 1;
        padding: 0.75rem 1rem;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        font-size: 0.875rem;
      }

      .tab-btn.active {
        background: var(--bg-primary);
        color: var(--primary);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      .tab-btn:hover:not(.active) {
        background: var(--bg-secondary);
        color: var(--text);
      }

      .auth-form {
        display: none;
      }

      .auth-form.active {
        display: block;
      }

      .form-group {
        margin-bottom: 1.5rem;
      }

      .form-label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: 500;
        color: var(--text);
      }

      .form-control {
        width: 100%;
        padding: 0.875rem 1rem;
        background: var(--bg-primary);
        border: 1px solid var(--border);
        border-radius: 12px;
        color: var(--text);
        font-size: 1rem;
        transition: all 0.3s ease;
      }

      .form-control:focus {
        outline: none;
        border-color: var(--primary);
        background: var(--bg-secondary);
        box-shadow: 0 0 0 3px rgba(55, 65, 81, 0.1);
      }

      .form-control::placeholder {
        color: var(--text-secondary);
      }

      .password-toggle {
        position: absolute;
        right: 1rem;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
        color: var(--text-secondary);
        transition: color 0.3s ease;
      }

      .password-toggle:hover {
        color: var(--text);
      }

      .login-btn {
        width: 100%;
        padding: 1rem;
        background: var(--primary);
        border: none;
        border-radius: 12px;
        color: white;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 1.5rem;
      }

      .login-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(55, 65, 81, 0.3);
      }

      .login-btn:active {
        transform: translateY(0);
      }

      .alert {
        border-radius: 12px;
        border: none;
        padding: 1rem;
        margin-bottom: 1.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 500;
      }

      .alert-danger {
        background: rgba(55, 65, 81, 0.1);
        border: 1px solid var(--border);
        color: var(--text);
      }

      .alert-success {
        background: rgba(55, 65, 81, 0.1);
        border: 1px solid var(--border);
        color: var(--text);
      }

      .demo-credentials {
        text-align: center;
        padding: 1.5rem;
        background: var(--bg-tertiary);
        border-radius: 16px;
        border: 1px solid var(--border);
      }

      .demo-credentials h6 {
        color: var(--text);
        margin-bottom: 1rem;
        font-weight: 600;
      }

      .demo-credentials p {
        margin: 0.5rem 0;
        font-size: 0.875rem;
        color: var(--text-secondary);
      }

      .demo-credentials code {
        background: var(--bg-secondary);
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.8125rem;
        color: var(--primary);
        border: 1px solid var(--border);
      }

      .text-center {
        text-align: center;
      }

      .mt-3 {
        margin-top: 1rem;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .login-container {
          padding: 1rem;
          max-width: 400px;
        }

        .login-card {
          padding: 2rem 1.5rem;
        }

        .login-header h1 {
          font-size: 2rem;
        }
      }

      @media (max-width: 576px) {
        .login-card {
          padding: 1.5rem 1rem;
        }

        .login-header h1 {
          font-size: 1.75rem;
        }

        .tab-btn {
          padding: 0.625rem 0.75rem;
          font-size: 0.8125rem;
        }
      }

      @media (max-width: 480px) {
        .login-container {
          padding: 0.75rem;
        }

        .login-card {
          padding: 1.25rem 0.875rem;
        }

        .form-control {
          padding: 0.75rem;
          font-size: 0.875rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="animated-bg"></div>

    <div class="login-container">
      <a href="index.html" class="back-btn">
        <i class="bi bi-arrow-left"></i>
        <span>Back to Home</span>
      </a>

      <div class="login-card">
        <div class="login-header">
          <h1>Welcome to EventHub</h1>
          <div class="role-badge" id="roleBadge">Loading...</div>
        </div>

        <!-- Tab Navigation -->
        <div class="auth-tabs">
          <button
            class="tab-btn active"
            id="loginTab"
            onclick="switchTab('login')"
          >
            <i class="bi bi-box-arrow-in-right"></i>
            Sign In
          </button>
          <button
            class="tab-btn"
            id="registerTab"
            onclick="switchTab('register')"
          >
            <i class="bi bi-person-plus"></i>
            Sign Up
          </button>
        </div>

        <!-- Alerts -->
        <div class="alert alert-danger" id="errorAlert" style="display: none">
          <i class="bi bi-exclamation-triangle"></i>
          <span id="errorMessage"></span>
        </div>

        <div
          class="alert alert-success"
          id="successAlert"
          style="display: none"
        >
          <i class="bi bi-check-circle"></i>
          <span id="successMessage"></span>
        </div>

        <!-- Login Form -->
        <form id="loginForm" class="auth-form active">
          <div class="form-group">
            <label class="form-label">Username</label>
            <input
              type="text"
              class="form-control"
              id="loginUsername"
              placeholder="Enter your username"
              required
            />
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <div style="position: relative">
              <input
                type="password"
                class="form-control"
                id="loginPassword"
                placeholder="Enter your password"
                required
              />
              <i
                class="bi bi-eye password-toggle"
                onclick="togglePassword('loginPassword')"
              ></i>
            </div>
          </div>

          <button type="submit" class="login-btn">
            <span>Sign In</span>
          </button>
        </form>

        <!-- Registration Form -->
        <form id="registerForm" class="auth-form">
          <div class="form-group">
            <label class="form-label">Full Name</label>
            <input
              type="text"
              class="form-control"
              id="registerName"
              placeholder="Enter your full name"
              required
            />
          </div>

          <div class="form-group">
            <label class="form-label">Email</label>
            <input
              type="email"
              class="form-control"
              id="registerEmail"
              placeholder="Enter your email"
              required
            />
          </div>

          <div class="form-group">
            <label class="form-label">Username</label>
            <input
              type="text"
              class="form-control"
              id="registerUsername"
              placeholder="Choose a username"
              required
              minlength="3"
            />
          </div>

          <div class="form-group">
            <label class="form-label">Password</label>
            <div style="position: relative">
              <input
                type="password"
                class="form-control"
                id="registerPassword"
                placeholder="Create a password (min 6 characters)"
                required
                minlength="6"
              />
              <i
                class="bi bi-eye password-toggle"
                onclick="togglePassword('registerPassword')"
              ></i>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Confirm Password</label>
            <input
              type="password"
              class="form-control"
              id="confirmPassword"
              placeholder="Confirm your password"
              required
            />
          </div>

          <button type="submit" class="login-btn">
            <span>Create Account</span>
          </button>
        </form>

        <div class="demo-credentials">
          <h6><i class="bi bi-info-circle me-2"></i>Demo Accounts Available</h6>
          <p>
            <strong>Admin:</strong> <code>admin</code> / <code>admin123</code>
          </p>
          <p>
            <strong>Student:</strong> <code>john_doe</code> /
            <code>password123</code>
          </p>
          <p class="text-center mt-3">
            <small>Or create your own account using the Sign Up tab</small>
          </p>
        </div>
      </div>
    </div>

    <script>
      // Initialize demo users and get selected role
      const selectedRole = localStorage.getItem("selected_role") || "student";
      document.getElementById("roleBadge").textContent = selectedRole;

      if (!localStorage.getItem("users_initialized")) {
        initializeDemoUsers();
      }

      function initializeDemoUsers() {
        const demoUsers = [
          {
            id: 1,
            username: "admin",
            password: "admin123",
            name: "System Administrator",
            email: "admin@eventhub.com",
            role: "admin",
          },
          {
            id: 2,
            username: "john_doe",
            password: "password123",
            name: "John Doe",
            email: "john.doe@student.edu",
            role: "student",
          },
        ];

        localStorage.setItem("users", JSON.stringify(demoUsers));
        localStorage.setItem("users_initialized", "true");

        // Initialize sample events and participants
        const currentEvents = JSON.parse(localStorage.getItem("events")) || [];

        if (currentEvents.length === 0) {
          const sampleEvents = [
            {
              id: "event_1738656000000",
              name: "AI & Machine Learning Workshop",
              category: "Tech",
              description:
                "Join us for an intensive workshop on Artificial Intelligence and Machine Learning. Learn about neural networks, deep learning algorithms, and practical applications. Hands-on coding sessions included.",
              datetime: "2026-03-15T10:00",
              venue: "Computer Lab - Block A",
              deadline: "2026-03-10T23:59",
              maxParticipants: 50,
              organizerName: "Dr. Sarah Johnson",
              contactEmail: "sarah.j@eventhub.com",
              contactPhone: "9876543210",
              status: "open",
              createdAt: "2026-02-01T08:00:00.000Z",
            },
            {
              id: "event_1738742400000",
              name: "Annual Cultural Fest 2026",
              category: "Cultural",
              description:
                "Celebrate diversity and creativity at our Annual Cultural Fest! Featuring dance performances, music concerts, drama, art exhibitions, and food stalls from various cultures. Open to all students.",
              datetime: "2026-03-20T14:00",
              venue: "Main Auditorium",
              deadline: "2026-03-15T23:59",
              maxParticipants: 200,
              organizerName: "Cultural Committee",
              contactEmail: "culture@eventhub.com",
              contactPhone: "9876543211",
              status: "open",
              createdAt: "2026-02-01T09:00:00.000Z",
            },
            {
              id: "event_1738828800000",
              name: "Inter-College Basketball Tournament",
              category: "Sports",
              description:
                "Showcase your basketball skills in our Inter-College Tournament. Teams of 5 players each. Exciting prizes for winners and runners-up. Registration per team.",
              datetime: "2026-03-25T09:00",
              venue: "Sports Complex - Court 1",
              deadline: "2026-03-18T23:59",
              maxParticipants: 80,
              organizerName: "Sports Department",
              contactEmail: "sports@eventhub.com",
              contactPhone: "9876543212",
              status: "open",
              createdAt: "2026-02-01T10:00:00.000Z",
            },
            {
              id: "event_1738915200000",
              name: "Web Development Bootcamp",
              category: "Tech",
              description:
                "Master modern web development! Learn HTML5, CSS3, JavaScript, React, and Node.js. Build real-world projects and get certificate upon completion. Perfect for beginners and intermediate developers.",
              datetime: "2026-04-05T10:00",
              venue: "Online - Zoom Link",
              deadline: "2026-03-30T23:59",
              maxParticipants: 100,
              organizerName: "Tech Club",
              contactEmail: "techclub@eventhub.com",
              contactPhone: "9876543213",
              status: "open",
              createdAt: "2026-02-02T08:00:00.000Z",
            },
            {
              id: "event_1739001600000",
              name: "Photography Exhibition & Workshop",
              category: "Cultural",
              description:
                "Explore the art of photography! Exhibition featuring student works followed by a hands-on workshop on composition, lighting, and editing. Bring your camera or smartphone.",
              datetime: "2026-04-10T15:00",
              venue: "Art Gallery - Ground Floor",
              deadline: "2026-04-05T23:59",
              maxParticipants: 60,
              organizerName: "Photography Club",
              contactEmail: "photo@eventhub.com",
              contactPhone: "9876543214",
              status: "open",
              createdAt: "2026-02-02T09:00:00.000Z",
            },
            {
              id: "event_1737360000000",
              name: "Hackathon 2025 - Winter Edition",
              category: "Tech",
              description:
                "24-hour coding marathon! Build innovative solutions to real-world problems. Categories: Healthcare, Education, Environment. Amazing prizes and internship opportunities for winners.",
              datetime: "2026-01-20T09:00",
              venue: "Innovation Hub - 3rd Floor",
              deadline: "2026-01-15T23:59",
              maxParticipants: 120,
              organizerName: "Coding Club",
              contactEmail: "hackathon@eventhub.com",
              contactPhone: "9876543215",
              status: "closed",
              createdAt: "2025-12-20T08:00:00.000Z",
            },
            {
              id: "event_1737446400000",
              name: "Classical Music Night",
              category: "Cultural",
              description:
                "An evening of mesmerizing classical music performances by renowned artists and talented students. Experience the magic of Indian classical music.",
              datetime: "2026-01-25T18:00",
              venue: "Main Auditorium",
              deadline: "2026-01-20T23:59",
              maxParticipants: 150,
              organizerName: "Music Society",
              contactEmail: "music@eventhub.com",
              contactPhone: "9876543216",
              status: "closed",
              createdAt: "2025-12-22T10:00:00.000Z",
            },
            {
              id: "event_1737532800000",
              name: "Marathon Run 2026",
              category: "Sports",
              description:
                "Annual 10K marathon for fitness enthusiasts. Run for health, run for fun! Refreshments and medals for all participants. T-shirts included in registration.",
              datetime: "2026-01-30T06:00",
              venue: "Campus Main Ground",
              deadline: "2026-01-25T23:59",
              maxParticipants: 250,
              organizerName: "Athletics Club",
              contactEmail: "athletics@eventhub.com",
              contactPhone: "9876543217",
              status: "closed",
              createdAt: "2025-12-28T08:00:00.000Z",
            },
          ];
          localStorage.setItem("events", JSON.stringify(sampleEvents));

          const sampleParticipants = [
            {
              eventId: "event_1737360000000",
              name: "John Doe",
              email: "john.doe@student.com",
              rollNumber: "CS001",
              department: "Computer Science",
              year: "3rd Year",
              phone: "9876543210",
              timestamp: "2026-01-10T10:30:00.000Z",
            },
            {
              eventId: "event_1737446400000",
              name: "John Doe",
              email: "john.doe@student.com",
              rollNumber: "CS001",
              department: "Computer Science",
              year: "3rd Year",
              phone: "9876543210",
              timestamp: "2026-01-18T14:20:00.000Z",
            },
            {
              eventId: "event_1738656000000",
              name: "John Doe",
              email: "john.doe@student.com",
              rollNumber: "CS001",
              department: "Computer Science",
              year: "3rd Year",
              phone: "9876543210",
              timestamp: "2026-02-05T09:15:00.000Z",
            },
          ];
          localStorage.setItem(
            "participants",
            JSON.stringify(sampleParticipants),
          );
        }

        if (!localStorage.getItem("participants")) {
          localStorage.setItem("participants", JSON.stringify([]));
        }
      }

      function switchTab(tab) {
        const loginTab = document.getElementById("loginTab");
        const registerTab = document.getElementById("registerTab");
        const loginForm = document.getElementById("loginForm");
        const registerForm = document.getElementById("registerForm");

        if (tab === "login") {
          loginTab.classList.add("active");
          registerTab.classList.remove("active");
          loginForm.classList.add("active");
          registerForm.classList.remove("active");
        } else {
          registerTab.classList.add("active");
          loginTab.classList.remove("active");
          registerForm.classList.add("active");
          loginForm.classList.remove("active");
        }

        hideAlerts();
      }

      function togglePassword(fieldId) {
        const passwordField = document.getElementById(fieldId);
        const icon = passwordField.nextElementSibling;

        if (passwordField.type === "password") {
          passwordField.type = "text";
          icon.classList.remove("bi-eye");
          icon.classList.add("bi-eye-slash");
        } else {
          passwordField.type = "password";
          icon.classList.remove("bi-eye-slash");
          icon.classList.add("bi-eye");
        }
      }

      function showError(message) {
        const errorAlert = document.getElementById("errorAlert");
        const errorMessage = document.getElementById("errorMessage");
        errorMessage.textContent = message;
        errorAlert.style.display = "flex";

        setTimeout(() => {
          errorAlert.style.display = "none";
        }, 5000);
      }

      function showSuccess(message) {
        const successAlert = document.getElementById("successAlert");
        const successMessage = document.getElementById("successMessage");
        successMessage.textContent = message;
        successAlert.style.display = "flex";

        setTimeout(() => {
          successAlert.style.display = "none";
        }, 3000);
      }

      function hideAlerts() {
        document.getElementById("errorAlert").style.display = "none";
        document.getElementById("successAlert").style.display = "none";
      }

      // Login form submission
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const username = document
            .getElementById("loginUsername")
            .value.trim();
          const password = document.getElementById("loginPassword").value;

          if (!username || !password) {
            showError("Please fill in all fields");
            return;
          }

          const users = JSON.parse(localStorage.getItem("users")) || [];
          const user = users.find(
            (u) => u.username === username && u.password === password,
          );

          if (user && user.role === selectedRole) {
            // Store current session
            localStorage.setItem("current_user", JSON.stringify(user));

            showSuccess("Login successful! Redirecting...");

            setTimeout(() => {
              if (selectedRole === "admin") {
                window.location.href = "Admin/admin-dashboard.html";
              } else {
                window.location.href = "Student/student-dashboard.html";
              }
            }, 1000);
          } else if (user && user.role !== selectedRole) {
            showError(
              `This account is registered as ${user.role}. Please select the correct role.`,
            );
          } else {
            showError("Invalid username or password");
          }
        });

      // Registration form submission
      document
        .getElementById("registerForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const name = document.getElementById("registerName").value.trim();
          const email = document.getElementById("registerEmail").value.trim();
          const username = document
            .getElementById("registerUsername")
            .value.trim();
          const password = document.getElementById("registerPassword").value;
          const confirmPassword =
            document.getElementById("confirmPassword").value;

          // Validation
          if (!name || !email || !username || !password || !confirmPassword) {
            showError("Please fill in all fields");
            return;
          }

          if (password !== confirmPassword) {
            showError("Passwords do not match");
            return;
          }

          if (password.length < 6) {
            showError("Password must be at least 6 characters long");
            return;
          }

          if (username.length < 3) {
            showError("Username must be at least 3 characters long");
            return;
          }

          const users = JSON.parse(localStorage.getItem("users")) || [];

          // Check if username or email already exists
          if (users.some((u) => u.username === username)) {
            showError(
              "Username already exists. Please choose a different one.",
            );
            return;
          }

          if (users.some((u) => u.email === email)) {
            showError(
              "Email already registered. Please use a different email.",
            );
            return;
          }

          // Create new user
          const newUser = {
            id: Date.now(),
            username,
            password,
            name,
            email,
            role: selectedRole,
          };

          users.push(newUser);
          localStorage.setItem("users", JSON.stringify(users));

          showSuccess("Account created successfully! You can now sign in.");

          // Switch to login tab
          setTimeout(() => {
            switchTab("login");
            document.getElementById("loginUsername").value = username;
          }, 1000);
        });

      // Auto-fill demo credentials on demo account click
      document.addEventListener("click", function (e) {
        if (e.target.tagName === "CODE") {
          const code = e.target.textContent;
          if (code === "admin" || code === "john_doe") {
            document.getElementById("loginUsername").value = code;
            if (code === "admin") {
              document.getElementById("loginPassword").value = "admin123";
            } else {
              document.getElementById("loginPassword").value = "password123";
            }
            switchTab("login");
          }
        }
      });
    </script>
  </body>
</html>
